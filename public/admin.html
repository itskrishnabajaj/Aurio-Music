<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aurio Admin Panel</title>
    <link rel="stylesheet" href="admin.css">
    <link rel="icon" href="https://res.cloudinary.com/ddyj2njes/image/upload/v1770220405/aurio_branding_nvrbwx.png">
</head>
<body>
    <!-- ADMIN LOGIN -->
    <div id="adminLogin" class="screen active">
        <div class="login-bg"></div>
        <div class="login-container">
            <img src="https://res.cloudinary.com/ddyj2njes/image/upload/v1770220405/aurio_branding_nvrbwx.png" alt="Aurio Admin" class="login-logo">
            <h1>Admin Panel</h1>
            <p class="login-subtitle">Aurio Music Management</p>
            <form id="adminLoginForm">
                <input type="password" id="adminPassword" placeholder="Enter admin password" required autocomplete="current-password">
                <button type="submit">Access Panel</button>
                <div id="loginError" class="error-message"></div>
            </form>
        </div>
    </div>

    <!-- ADMIN PANEL -->
    <div id="adminPanel" class="screen">
        <header class="admin-header">
            <div class="header-left">
                <img src="https://res.cloudinary.com/ddyj2njes/image/upload/v1770220405/aurio_branding_nvrbwx.png" alt="Aurio">
                <h1>Admin Panel</h1>
            </div>
            <button id="adminLogout">Logout</button>
        </header>

        <nav class="admin-nav">
            <button class="nav-item active" data-view="analytics">üìä Analytics</button>
            <button class="nav-item" data-view="upload">‚¨ÜÔ∏è Upload</button>
            <button class="nav-item" data-view="songs">üéµ Songs</button>
            <button class="nav-item" data-view="artists">üé§ Artists</button>
            <button class="nav-item" data-view="playlists">üìù Playlists</button>
            <button class="nav-item" data-view="users">üë• Users</button>
        </nav>

        <main class="admin-content">
            <!-- ANALYTICS VIEW -->
            <div id="analyticsView" class="view active">
                <h2>Dashboard Overview</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üéµ</div>
                        <div class="stat-value" id="totalSongs">0</div>
                        <div class="stat-label">Total Songs</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-value" id="activeUsers">0</div>
                        <div class="stat-label">Active Users</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚ñ∂Ô∏è</div>
                        <div class="stat-value" id="totalPlays">0</div>
                        <div class="stat-label">Total Plays</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üíæ</div>
                        <div class="stat-value" id="storageUsed">0 MB</div>
                        <div class="stat-label">Storage Used</div>
                    </div>
                </div>

                <div class="analytics-section">
                    <h3>Top 10 Most Played Songs</h3>
                    <div id="topSongsList" class="top-songs-list"></div>
                </div>

                <div class="analytics-section">
                    <h3>Genre Distribution</h3>
                    <div id="genreChart" class="genre-chart"></div>
                </div>

                <div class="analytics-section">
                    <h3>User Engagement</h3>
                    <div id="userEngagement" class="user-engagement-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Total Plays</th>
                                    <th>Listening Time</th>
                                    <th>Top Song</th>
                                    <th>Last Active</th>
                                </tr>
                            </thead>
                            <tbody id="userEngagementBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- UPLOAD VIEW -->
            <div id="uploadView" class="view">
                <h2>Upload Songs</h2>
                <div class="upload-container">
                    <div id="dropZone" class="drop-zone">
                        <input type="file" id="fileInput" accept="audio/mp3,audio/m4a,audio/mpeg" multiple hidden>
                        <div class="drop-zone-content">
                            <div class="drop-zone-icon">üìÅ</div>
                            <h3>Drag & Drop Audio Files</h3>
                            <p>or click to browse</p>
                            <span class="drop-zone-hint">Supports MP3, M4A ‚Ä¢ Auto-extracts metadata from ID3 tags</span>
                        </div>
                    </div>
                    
                    <div id="uploadQueue" class="upload-queue"></div>
                </div>
            </div>

            <!-- SONGS VIEW -->
            <div id="songsView" class="view">
                <div class="view-header">
                    <h2>Song Library</h2>
                    <input type="text" id="songSearchInput" placeholder="Search songs..." class="search-input">
                </div>
                <div id="songsList" class="songs-grid"></div>
            </div>

            <!-- ARTISTS VIEW -->
            <div id="artistsView" class="view">
                <div class="view-header">
                    <h2>Artist Profiles</h2>
                    <input type="text" id="artistSearchInput" placeholder="Search artists..." class="search-input">
                </div>
                <div id="artistsAdminList" class="artists-admin-grid"></div>
            </div>

            <!-- PLAYLISTS VIEW -->
            <div id="playlistsView" class="view">
                <div class="view-header">
                    <h2>Playlists</h2>
                    <button id="createPlaylistBtn" class="btn-primary">+ Create Playlist</button>
                </div>
                <div id="playlistsList" class="playlists-grid"></div>
            </div>

            <!-- USERS VIEW -->
            <div id="usersView" class="view">
                <h2>User Management</h2>
                <div id="usersList" class="users-list"></div>
            </div>
        </main>
    </div>

    <!-- EDIT SONG MODAL -->
    <div id="editSongModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Song</h3>
                <button class="close-modal" onclick="closeEditSongModal()">‚úï</button>
            </div>
            <form id="editSongForm">
                <input type="hidden" id="editSongId">
                
                <div class="form-group">
                    <label>Title</label>
                    <input type="text" id="editTitle" required>
                </div>

                <div class="form-group">
                    <label>Artist</label>
                    <input type="text" id="editArtist" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Album</label>
                        <input type="text" id="editAlbum">
                    </div>
                    <div class="form-group">
                        <label>Year</label>
                        <input type="number" id="editYear">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Genre</label>
                        <div id="editGenre" class="checkbox-group">
                            <label class="checkbox-label"><input type="checkbox" value="pop"> Pop</label>
                            <label class="checkbox-label"><input type="checkbox" value="rock"> Rock</label>
                            <label class="checkbox-label"><input type="checkbox" value="hiphop"> Hip Hop</label>
                            <label class="checkbox-label"><input type="checkbox" value="electronic"> Electronic</label>
                            <label class="checkbox-label"><input type="checkbox" value="jazz"> Jazz</label>
                            <label class="checkbox-label"><input type="checkbox" value="classical"> Classical</label>
                            <label class="checkbox-label"><input type="checkbox" value="country"> Country</label>
                            <label class="checkbox-label"><input type="checkbox" value="rb"> R&B</label>
                            <label class="checkbox-label"><input type="checkbox" value="indie"> Indie</label>
                            <label class="checkbox-label"><input type="checkbox" value="other"> Other</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Mood</label>
                        <div id="editMood" class="checkbox-group">
                            <label class="checkbox-label"><input type="checkbox" value="energetic"> Energetic</label>
                            <label class="checkbox-label"><input type="checkbox" value="calm"> Calm</label>
                            <label class="checkbox-label"><input type="checkbox" value="chill"> Chill</label>
                            <label class="checkbox-label"><input type="checkbox" value="happy"> Happy</label>
                            <label class="checkbox-label"><input type="checkbox" value="sad"> Sad</label>
                            <label class="checkbox-label"><input type="checkbox" value="romantic"> Romantic</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Duration</label>
                    <input type="text" id="editDuration" placeholder="3:45" readonly>
                    <small style="color: var(--text-secondary); font-size: 12px;">Auto-detected from audio file</small>
                </div>

                <div class="form-group">
                    <label>New Cover Image (Optional)</label>
                    <input type="file" id="editCoverFile" accept="image/*">
                </div>

                <div class="modal-buttons">
                    <button type="button" onclick="closeEditSongModal()">Cancel</button>
                    <button type="submit">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- EDIT ARTIST MODAL -->
    <div id="editArtistModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Artist Profile</h3>
                <button class="close-modal" onclick="closeEditArtistModal()">‚úï</button>
            </div>
            <form id="editArtistForm">
                <input type="hidden" id="editArtistName">
                
                <div class="form-group">
                    <label>Artist Name</label>
                    <input type="text" id="editArtistDisplayName" disabled>
                </div>

                <div class="form-group">
                    <label>Bio / Description</label>
                    <textarea id="editArtistBio" rows="4" placeholder="Add artist biography..."></textarea>
                </div>

                <div class="form-group">
                    <label>Genres (comma separated)</label>
                    <input type="text" id="editArtistGenres" placeholder="e.g., Pop, Rock, Electronic">
                </div>

                <div class="form-group">
                    <label>Cover Photo</label>
                    <input type="file" id="editArtistCover" accept="image/*">
                    <div id="currentArtistCover" class="current-cover"></div>
                </div>

                <div class="modal-buttons">
                    <button type="button" onclick="closeEditArtistModal()">Cancel</button>
                    <button type="submit">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- CREATE PLAYLIST MODAL -->
    <div id="createPlaylistModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Create Playlist</h3>
                <button class="close-modal" onclick="closeCreatePlaylistModal()">‚úï</button>
            </div>
            <form id="createPlaylistForm">
                <div class="form-group">
                    <label>Playlist Name</label>
                    <input type="text" id="playlistName" required>
                </div>

                <div class="form-group">
                    <label>Description</label>
                    <textarea id="playlistDescription" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label>Cover Image (Optional)</label>
                    <input type="file" id="playlistCoverFile" accept="image/*">
                </div>

                <div class="form-group">
                    <label>Select Songs</label>
                    <input type="text" id="playlistSongSearch" placeholder="Search songs..." class="search-input">
                    <div id="playlistSongsList" class="playlist-songs-selector"></div>
                </div>

                <div class="modal-buttons">
                    <button type="button" onclick="closeCreatePlaylistModal()">Cancel</button>
                    <button type="submit">Create Playlist</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsmediatags/3.9.5/jsmediatags.min.js"></script>
    <script src="cloudinary.js"></script>
    <script src="admin.js"></script>
</body>
</html>
