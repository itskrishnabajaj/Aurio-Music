<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#6C5CE7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Aurio - Music Streaming</title>
    <link rel="manifest" href="/manifest.json">
    <link rel="stylesheet" href="/style.css">
    <link rel="icon" href="https://res.cloudinary.com/ddyj2njes/image/upload/v1770117754/aurio_logo_192_ffqdgn.png">
</head>
<body>
    <!-- Auth Screen -->
    <div id="authScreen" class="screen active">
        <div class="auth-container">
            <div class="auth-logo-container">
                <img src="https://res.cloudinary.com/ddyj2njes/image/upload/v1770117754/aurio_logo_192_ffqdgn.png" alt="Aurio" class="auth-logo">
                <div class="logo-glow"></div>
            </div>
            <h1 class="auth-title">Aurio</h1>
            <p class="auth-tagline">Your music, everywhere</p>
            
            <!-- Auth Selection -->
            <div id="authSelection" class="auth-selection">
                <button id="googleBtn" class="auth-btn google-btn">
                    <svg width="18" height="18" viewBox="0 0 18 18">
                        <path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/>
                        <path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/>
                        <path fill="#FBBC05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707s.102-1.167.282-1.707V4.961H.957C.347 6.175 0 7.55 0 9s.348 2.825.957 4.039l3.007-2.332z"/>
                        <path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.961L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"/>
                    </svg>
                    Continue with Google
                </button>

                <button id="emailBtn" class="auth-btn email-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="4" width="20" height="16" rx="2"/>
                        <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
                    </svg>
                    Continue with Email
                </button>

                <button id="phoneBtn" class="auth-btn phone-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                    </svg>
                    Continue with Phone
                </button>
            </div>

            <!-- Email Form -->
            <div id="emailForm" class="auth-form hidden">
                <button class="back-btn" id="emailBack">← Back</button>
                <h2 id="emailTitle">Sign In</h2>
                <input type="email" id="emailInput" class="auth-input" placeholder="Email">
                <input type="password" id="passInput" class="auth-input" placeholder="Password">
                <button id="emailSubmit" class="auth-btn">Sign In</button>
                <button id="toggleSignup" class="text-btn">Create account</button>
            </div>

            <!-- Phone Form -->
            <div id="phoneForm" class="auth-form hidden">
                <button class="back-btn" id="phoneBack">← Back</button>
                <h2>Phone Sign In</h2>
                <div id="step1">
                    <input type="tel" id="phoneNum" class="auth-input" placeholder="+1234567890" style="margin-bottom:16px;">
                    <button id="sendCode" class="auth-btn">Send Code</button>
                </div>
                <div id="step2" class="hidden">
                    <input type="text" id="codeInput" class="auth-input" placeholder="6-digit code" maxlength="6" style="margin-bottom:16px;">
                    <button id="verifyCode" class="auth-btn">Verify</button>
                </div>
            </div>

            <p class="auth-footer">By KrisVeltrix</p>
        </div>
        <div id="recaptcha"></div>
    </div>

    <!-- App Screen (same as before) -->
    <div id="appScreen" class="screen">
        <header class="app-header">
            <div class="header-left">
                <img src="https://res.cloudinary.com/ddyj2njes/image/upload/v1770117754/aurio_logo_192_ffqdgn.png" class="header-logo">
                <h1 id="headerTitle">Home</h1>
            </div>
            <div class="header-right">
                <button class="icon-btn" id="searchToggleBtn"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg></button>
                <img id="userAvatar" class="user-avatar">
            </div>
        </header>

        <div class="search-container" id="searchContainer">
            <div class="search-box">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
                <input type="text" id="searchInput" placeholder="Search...">
                <button class="search-clear" id="searchClear" style="display:none;">×</button>
            </div>
        </div>

        <main class="app-main">
            <div class="tab-content active" id="homeTab">
                <div class="content-scroll">
                    <section class="quick-actions">
                        <button class="quick-btn" data-action="liked"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg><span>Liked</span></button>
                        <button class="quick-btn" data-action="recent"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg><span>Recent</span></button>
                        <button class="quick-btn" data-action="top"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg><span>Top</span></button>
                    </section>
                    <section class="section">
                        <h2 class="section-title">For You</h2>
                        <div class="smart-playlists" id="smartPlaylists"></div>
                    </section>
                    <section class="section" id="recentSection" style="display:none;">
                        <h2 class="section-title">Recently Played</h2>
                        <div class="song-grid" id="recentSongs"></div>
                    </section>
                </div>
            </div>

            <div class="tab-content" id="libraryTab">
                <div class="content-scroll">
                    <div class="library-sections">
                        <button class="section-btn active" data-section="all">All</button>
                        <button class="section-btn" data-section="playlists">Playlists</button>
                    </div>
                    <div class="library-view active" id="allSongsView">
                        <div class="view-controls">
                            <button class="control-btn" id="shuffleAllBtn"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 3 21 3 21 8"/><line x1="4" y1="20" x2="21" y2="3"/></svg>Shuffle</button>
                            <select class="control-select" id="sortSelect">
                                <option value="recent">Recent</option>
                                <option value="title">Title</option>
                                <option value="artist">Artist</option>
                            </select>
                        </div>
                        <div class="song-list" id="allSongsList"></div>
                    </div>
                    <div class="library-view" id="playlistsView">
                        <button class="create-playlist-btn" id="createPlaylistBtn"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>Create Playlist</button>
                        <div class="playlist-grid" id="playlistGrid"></div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="searchTab">
                <div class="content-scroll"><div id="searchResults"></div></div>
            </div>

            <div class="tab-content" id="profileTab">
                <div class="content-scroll">
                    <div class="profile-header">
                        <img id="profileAvatar" class="profile-avatar">
                        <h2 id="profileName">User</h2>
                        <p id="profileEmail">email</p>
                    </div>
                    <section class="stats-section">
                        <h3 class="section-title">Stats</h3>
                        <div class="stats-grid">
                            <div class="stat-card"><div class="stat-value" id="statTotalPlays">0</div><div class="stat-label">Plays</div></div>
                            <div class="stat-card"><div class="stat-value" id="statListeningTime">0h</div><div class="stat-label">Time</div></div>
                            <div class="stat-card"><div class="stat-value" id="statFavorites">0</div><div class="stat-label">Liked</div></div>
                            <div class="stat-card"><div class="stat-value" id="statPlaylists">0</div><div class="stat-label">Playlists</div></div>
                        </div>
                    </section>
                    <section class="settings-section">
                        <button class="btn-secondary full-width" id="signOutBtn">Sign Out</button>
                    </section>
                </div>
            </div>
        </main>

        <div class="mini-player hidden" id="miniPlayer">
            <div class="mini-player-content" id="miniPlayerTap">
                <img id="miniCover" class="mini-cover">
                <div class="mini-info">
                    <div id="miniTitle" class="mini-title">Song</div>
                    <div id="miniArtist" class="mini-artist">Artist</div>
                </div>
                <button class="mini-btn" id="miniPlayPauseBtn">
                    <svg id="miniPlayIcon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                    <svg id="miniPauseIcon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="display:none;"><path d="M6 4h4v16H6zm8 0h4v16h-4z"/></svg>
                </button>
            </div>
            <div class="mini-progress" id="miniProgress"></div>
        </div>

        <div class="full-player hidden" id="fullPlayer">
            <div class="full-player-content">
                <div class="full-header">
                    <button class="icon-btn" id="minimizePlayer"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg></button>
                    <div class="full-title">Now Playing</div>
                    <div style="width:40px;"></div>
                </div>
                <div class="full-artwork"><img id="fullCover" class="full-cover"></div>
                <div class="full-info">
                    <h2 id="fullTitle" class="full-song-title">Song</h2>
                    <p id="fullArtist" class="full-artist">Artist</p>
                </div>
                <div class="full-controls">
                    <div class="progress-container">
                        <span id="currentTime" class="time-label">0:00</span>
                        <input type="range" id="progressBar" class="progress-slider" min="0" max="100" value="0">
                        <span id="duration" class="time-label">0:00</span>
                    </div>
                    <div class="control-buttons">
                        <button class="control-btn" id="shuffleBtn"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 3 21 3 21 8"/><line x1="4" y1="20" x2="21" y2="3"/></svg></button>
                        <button class="control-btn" id="prevBtn"><svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg></button>
                        <button class="control-btn play-btn" id="playPauseBtn">
                            <svg id="playIcon" width="40" height="40" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                            <svg id="pauseIcon" width="40" height="40" viewBox="0 0 24 24" fill="currentColor" style="display:none;"><path d="M6 4h4v16H6zm8 0h4v16h-4z"/></svg>
                        </button>
                        <button class="control-btn" id="nextBtn"><svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg></button>
                        <button class="control-btn" id="repeatBtn"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="17 1 21 5 17 9"/><path d="M3 11V9a4 4 0 0 1 4-4h14"/><polyline points="7 23 3 19 7 15"/><path d="M21 13v2a4 4 0 0 1-4 4H3"/></svg></button>
                    </div>
                    <div class="extra-controls">
                        <button class="extra-btn" id="likeBtn"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg></button>
                    </div>
                </div>
            </div>
        </div>

        <nav class="bottom-nav">
            <button class="nav-btn active" data-tab="home"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg><span>Home</span></button>
            <button class="nav-btn" data-tab="library"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg><span>Library</span></button>
            <button class="nav-btn" data-tab="search"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg><span>Search</span></button>
            <button class="nav-btn" data-tab="profile"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg><span>Profile</span></button>
        </nav>
    </div>

    <audio id="audioPlayer"></audio>
    <div id="toastContainer" class="toast-container"></div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="/firebase.js"></script>
    <script src="/cloudinary.js"></script>
    <script src="/app.js"></script>
</body>
</html>
