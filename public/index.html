<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Aurio Music</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="https://res.cloudinary.com/ddyj2njes/image/upload/v1770220405/aurio_branding_nvrbwx.png">
</head>
<body>
    <!-- AUTH SCREEN -->
    <div id="authScreen" class="screen active">
        <div class="auth-bg"></div>
        <div class="auth-container">
            <div class="auth-logo-container">
                <img src="https://res.cloudinary.com/ddyj2njes/image/upload/v1770220405/aurio_branding_nvrbwx.png" alt="Aurio" class="auth-logo">
                <h1 class="auth-title">Aurio</h1>
                <p class="auth-tagline">Your personal music sanctuary</p>
            </div>
            
            <div id="authButtons" class="auth-buttons">
                <button id="showSignInBtn" class="auth-action-btn primary">
                    <span>Sign In</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M13.8 12H3"/>
                    </svg>
                </button>
                <button id="showSignUpBtn" class="auth-action-btn secondary">
                    <span>Create Account</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                        <line x1="19" y1="8" x2="19" y2="14"/>
                        <line x1="22" y1="11" x2="16" y2="11"/>
                    </svg>
                </button>
            </div>

            <form id="signInForm" class="auth-form">
                <button type="button" class="back-to-auth" id="backFromSignIn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Back
                </button>
                <h2>Welcome back</h2>
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="signInUsername" placeholder="Enter your username" required autocomplete="username">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="signInPassword" placeholder="Enter your password" required autocomplete="current-password">
                </div>
                <div id="signInError" class="error-message"></div>
                <button type="submit" class="auth-submit-btn">
                    <span>Sign In</span>
                    <div class="btn-loader"></div>
                </button>
            </form>

            <form id="signUpForm" class="auth-form">
                <button type="button" class="back-to-auth" id="backFromSignUp">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Back
                </button>
                <h2>Create your account</h2>
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="signUpUsername" placeholder="Choose a username" required autocomplete="username">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="signUpPassword" placeholder="Create a password" required autocomplete="new-password">
                </div>
                <div class="form-group">
                    <label>Confirm Password</label>
                    <input type="password" id="signUpConfirm" placeholder="Confirm your password" required autocomplete="new-password">
                </div>
                <div id="signUpError" class="error-message"></div>
                <button type="submit" class="auth-submit-btn">
                    <span>Create Account</span>
                    <div class="btn-loader"></div>
                </button>
            </form>

            <div id="pendingApproval" class="pending-container">
                <div class="pending-icon">‚è≥</div>
                <h2>Awaiting Approval</h2>
                <p>Your account is pending admin approval. You'll be able to access the app once approved.</p>
                <button id="logoutPending" class="auth-action-btn secondary">Logout</button>
            </div>
        </div>
    </div>

    <!-- MAIN APP -->
    <div id="appScreen" class="screen">
        <header class="top-bar">
            <div class="top-bar-content">
                <div class="top-bar-left">
                    <img src="https://res.cloudinary.com/ddyj2njes/image/upload/v1770220405/aurio_branding_nvrbwx.png" alt="Aurio" class="top-logo">
                    <div class="greeting-container">
                        <span id="greetingText" class="greeting-text"></span>
                        <span id="greetingEmoji" class="greeting-emoji"></span>
                    </div>
                </div>
            </div>
        </header>

        <main id="mainContent">
            <div id="homeView" class="view active">
                <section class="content-section" id="recentlyPlayedSection">
                    <div class="section-header">
                        <h2>Recently Played</h2>
                    </div>
                    <div id="recentlyPlayed" class="song-grid"></div>
                </section>

                <div class="section-divider"></div>

                <section class="content-section" id="aiRecommendationsSection">
                    <div class="section-header">
                        <h2 id="aiSectionTitle">For You</h2>
                        <span class="section-badge">AI Picks</span>
                    </div>
                    <div id="aiRecommendations" class="song-grid"></div>
                </section>

                <div class="section-divider"></div>

                <section class="content-section">
                    <div class="section-header">
                        <h2>Old Is Gold</h2>
                        <span class="section-badge">Pre-2005</span>
                    </div>
                    <div id="oldIsGold" class="song-grid"></div>
                </section>

                <div class="section-divider"></div>

                <section class="content-section">
                    <div class="section-header">
                        <h2>Most Played</h2>
                        <span class="section-badge">Popular</span>
                    </div>
                    <div id="mostPlayed" class="song-grid"></div>
                </section>

                <div class="section-divider"></div>

                <section class="content-section">
                    <div class="section-header">
                        <h2>Artists</h2>
                    </div>
                    <div id="artistsList" class="artists-grid"></div>
                </section>

                <div class="section-divider"></div>

                <section class="content-section">
                    <div class="section-header">
                        <h2>Playlists</h2>
                    </div>
                    <div id="homePlaylistsList" class="song-grid"></div>
                </section>
            </div>

            <div id="libraryView" class="view">
                <div class="view-header">
                    <h1>Your Library</h1>
                    <p class="view-subtitle">All your music in one place</p>
                </div>
                <div id="allSongsList" class="song-list"></div>
            </div>

            <div id="searchView" class="view">
                <div class="search-header">
                    <div class="search-input-container">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="m21 21-4.35-4.35"/>
                        </svg>
                        <input type="text" id="searchInput" placeholder="Search songs, artists, albums..." autocomplete="off">
                    </div>
                </div>
                <div id="searchResults" class="song-list"></div>
            </div>

            <div id="profileView" class="view">
                <div class="profile-header">
                    <div class="profile-avatar-container">
                        <div class="profile-avatar" id="profileAvatar"></div>
                    </div>
                    <h2 id="profileUsername"></h2>
                </div>

                <div class="profile-sections">
                    <div class="profile-section">
                        <div class="section-header">
                            <h3>Liked Songs</h3>
                            <span class="section-count" id="likedCount">0</span>
                        </div>
                        <div id="likedSongsList" class="song-list"></div>
                    </div>

                    <div class="section-divider"></div>

                    <div class="profile-section">
                        <div class="section-header">
                            <h3>Playlists</h3>
                        </div>
                        <div id="playlistsList" class="playlists-grid"></div>
                    </div>

                    <div class="section-divider"></div>

                    <div class="profile-actions">
                        <button id="changePasswordBtn" class="profile-action-btn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                            </svg>
                            Change Password
                        </button>
                        <button id="logoutBtn" class="profile-action-btn logout">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                                <polyline points="16 17 21 12 16 7"/>
                                <line x1="21" y1="12" x2="9" y2="12"/>
                            </svg>
                            Logout
                        </button>
                    </div>
                </div>
            </div>

            <div id="artistView" class="view">
                <button id="backFromArtist" class="back-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Back
                </button>
                <div class="artist-detail-header">
                    <img id="artistCover" class="artist-detail-cover" src="" alt="">
                    <div class="artist-detail-gradient"></div>
                    <div class="artist-detail-info">
                        <h1 id="artistName"></h1>
                        <p id="artistBio" class="artist-bio"></p>
                        <div id="artistGenres" class="artist-genres"></div>
                        <div id="artistStats" class="artist-stats"></div>
                    </div>
                </div>
                <div class="section-divider"></div>
                <div class="section-header">
                    <h3>Songs</h3>
                </div>
                <div id="artistSongs" class="song-list"></div>
            </div>
        </main>

        <div id="miniPlayer" class="mini-player">
            <div class="mini-player-progress" id="miniProgress"></div>
            <div class="mini-player-content">
                <div class="mini-player-left">
                    <img id="miniCover" src="" alt="">
                    <div class="mini-player-info">
                        <div id="miniTitle"></div>
                        <div id="miniArtist"></div>
                    </div>
                </div>
                <div class="mini-player-controls">
                    <button id="miniPlayPause" class="mini-control-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <div id="fullPlayer" class="full-player">
            <div class="full-player-bg" id="playerBg"></div>
            <button id="closePlayer" class="close-player">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            
            <div class="player-content">
                <img id="playerCover" src="" alt="" class="player-cover">
                
                <div class="player-info">
                    <h1 id="playerTitle"></h1>
                    <p id="playerArtist"></p>
                </div>
                
                <div class="player-progress-container">
                    <span id="currentTime">0:00</span>
                    <div class="player-progress-bar">
                        <input type="range" id="progressBar" min="0" max="100" value="0">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <span id="totalTime">0:00</span>
                </div>
                
                <div class="player-controls">
                    <button id="shuffleBtn" class="player-control-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="16 3 21 3 21 8"/>
                            <line x1="4" y1="20" x2="21" y2="3"/>
                            <polyline points="21 16 21 21 16 21"/>
                            <line x1="15" y1="15" x2="21" y2="21"/>
                            <line x1="4" y1="4" x2="9" y2="9"/>
                        </svg>
                    </button>
                    <button id="prevBtn" class="player-control-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
                        </svg>
                    </button>
                    <button id="playPauseBtn" class="player-control-btn main">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                    </button>
                    <button id="nextBtn" class="player-control-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 18h2V6h-2zm-11-7l8.5-6v12z"/>
                        </svg>
                    </button>
                    <button id="repeatBtn" class="player-control-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="17 1 21 5 17 9"/>
                            <path d="M3 11V9a4 4 0 0 1 4-4h14"/>
                            <polyline points="7 23 3 19 7 15"/>
                            <path d="M21 13v2a4 4 0 0 1-4 4H3"/>
                        </svg>
                    </button>
                </div>
                
                <div class="player-actions">
                    <button id="likeBtn" class="player-action-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                        </svg>
                    </button>
                    <div class="volume-control">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/>
                        </svg>
                        <input type="range" id="volumeSlider" min="0" max="100" value="80">
                    </div>
                </div>
            </div>
        </div>

        <nav class="bottom-nav">
            <button data-view="homeView" class="nav-btn active">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                    <polyline points="9 22 9 12 15 12 15 22"/>
                </svg>
                <span>Home</span>
            </button>
            <button data-view="libraryView" class="nav-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
                </svg>
                <span>Library</span>
            </button>
            <button data-view="searchView" class="nav-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="m21 21-4.35-4.35"/>
                </svg>
                <span>Search</span>
            </button>
            <button data-view="profileView" class="nav-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                </svg>
                <span>Profile</span>
            </button>
        </nav>
    </div>

    <div id="passwordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Change Password</h3>
                <button class="modal-close" id="closePasswordModal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <form id="passwordForm">
                <div class="form-group">
                    <label>Current Password</label>
                    <input type="password" id="currentPassword" required>
                </div>
                <div class="form-group">
                    <label>New Password</label>
                    <input type="password" id="newPassword" required>
                </div>
                <div class="form-group">
                    <label>Confirm New Password</label>
                    <input type="password" id="confirmNewPassword" required>
                </div>
                <div id="passwordError" class="error-message"></div>
                <div class="modal-actions">
                    <button type="button" id="cancelPassword" class="modal-btn secondary">Cancel</button>
                    <button type="submit" class="modal-btn primary">Change Password</button>
                </div>
            </form>
        </div>
    </div>

    <audio id="audioPlayer"></audio>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="firebase.js"></script>
    <script src="cloudinary.js"></script>
    <script src="app.js"></script>
</body>
</html>
