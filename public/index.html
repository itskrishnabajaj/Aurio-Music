<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Aurio Music</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="https://res.cloudinary.com/ddyj2njes/image/upload/v1770220405/aurio_branding_nvrbwx.png">
</head>
<body>
    <!-- AUTH SCREEN (FIRST RENDER) -->
    <div id="authScreen" class="screen active">
        <div class="auth-container">
            <img src="https://res.cloudinary.com/ddyj2njes/image/upload/v1770220405/aurio_branding_nvrbwx.png" alt="Aurio" class="auth-logo">
            <h1>Aurio Music</h1>
            
            <div id="authToggle" class="auth-toggle">
                <button id="showSignIn" class="active">Sign In</button>
                <button id="showSignUp">Sign Up</button>
            </div>

            <form id="signInForm" class="auth-form active">
                <input type="text" id="signInUsername" placeholder="Username" required autocomplete="username">
                <input type="password" id="signInPassword" placeholder="Password" required autocomplete="current-password">
                <button type="submit">Sign In</button>
                <div id="signInError" class="error-message"></div>
            </form>

            <form id="signUpForm" class="auth-form">
                <input type="text" id="signUpUsername" placeholder="Username" required autocomplete="username">
                <input type="password" id="signUpPassword" placeholder="Password" required autocomplete="new-password">
                <input type="password" id="signUpConfirm" placeholder="Confirm Password" required autocomplete="new-password">
                <button type="submit">Sign Up</button>
                <div id="signUpError" class="error-message"></div>
            </form>

            <div id="pendingApproval" class="pending-message" style="display:none;">
                <p>‚è≥ Waiting for admin approval</p>
                <button id="logoutPending">Logout</button>
            </div>
        </div>
    </div>

    <!-- MAIN APP (ONLY SHOWN WHEN AUTHENTICATED) -->
    <div id="appScreen" class="screen">
        <!-- TOP BAR -->
        <header class="top-bar">
            <img src="https://res.cloudinary.com/ddyj2njes/image/upload/v1770220405/aurio_branding_nvrbwx.png" alt="Aurio" class="top-logo">
            <span id="greetingText"></span>
        </header>

        <!-- CONTENT AREA -->
        <main id="mainContent">
            <!-- HOME SCREEN -->
            <div id="homeView" class="view active">
                <section class="content-section">
                    <h2>Recently Played</h2>
                    <div id="recentlyPlayed" class="song-grid"></div>
                </section>

                <section class="content-section">
                    <h2 id="aiSectionTitle">For You</h2>
                    <div id="aiRecommendations" class="song-grid"></div>
                </section>

                <section class="content-section">
                    <h2>Old Is Gold</h2>
                    <div id="oldIsGold" class="song-grid"></div>
                </section>

                <section class="content-section">
                    <h2>Most Played</h2>
                    <div id="mostPlayed" class="song-grid"></div>
                </section>

                <section class="content-section">
                    <h2>Artists</h2>
                    <div id="artistsList" class="artists-grid"></div>
                </section>

                <section class="content-section">
                    <h2>Playlists</h2>
                    <div id="homePlaylistsList" class="song-grid"></div>
                </section>
            </div>

            <!-- LIBRARY SCREEN -->
            <div id="libraryView" class="view">
                <h2>All Songs</h2>
                <div id="allSongsList" class="song-list"></div>
            </div>

            <!-- SEARCH SCREEN -->
            <div id="searchView" class="view">
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="Search songs, artists..." autocomplete="off">
                </div>
                <div id="searchResults" class="song-list"></div>
            </div>

            <!-- PROFILE SCREEN -->
            <div id="profileView" class="view">
                <div class="profile-header">
                    <div class="profile-avatar" id="profileAvatar"></div>
                    <h2 id="profileUsername"></h2>
                </div>

                <div class="profile-section">
                    <h3>Liked Songs</h3>
                    <div id="likedSongsList" class="song-list"></div>
                </div>

                <div class="profile-section">
                    <h3>Playlists</h3>
                    <div id="playlistsList"></div>
                </div>

                <button id="changePasswordBtn" class="profile-btn">Change Password</button>
                <button id="logoutBtn" class="profile-btn logout">Logout</button>
            </div>

            <!-- ARTIST DETAIL SCREEN -->
            <div id="artistView" class="view">
                <button id="backFromArtist" class="back-btn">‚Üê Back</button>
                <div class="artist-detail-header">
                    <img id="artistCover" class="artist-detail-cover" src="" alt="">
                    <div class="artist-detail-info">
                        <h2 id="artistName"></h2>
                        <p id="artistBio" class="artist-bio"></p>
                        <div id="artistGenres" class="artist-genres"></div>
                        <div id="artistStats" class="artist-stats"></div>
                    </div>
                </div>
                <h3 style="margin: 20px 0 15px 0;">Songs</h3>
                <div id="artistSongs" class="song-list"></div>
            </div>
        </main>

        <!-- MINIMIZED PLAYER -->
        <div id="miniPlayer" class="mini-player" style="display:none;">
            <img id="miniCover" src="" alt="">
            <div class="mini-info">
                <div id="miniTitle"></div>
                <div id="miniArtist"></div>
            </div>
            <div class="mini-controls">
                <button id="miniPrev">‚èÆ</button>
                <button id="miniPlayPause">‚ñ∂</button>
                <button id="miniNext">‚è≠</button>
            </div>
        </div>

        <!-- FULL PLAYER -->
        <div id="fullPlayer" class="full-player">
            <button id="closePlayer" class="close-player">‚úï</button>
            <img id="playerCover" src="" alt="">
            <div class="player-info">
                <h3 id="playerTitle"></h3>
                <p id="playerArtist"></p>
            </div>
            <div class="player-progress">
                <span id="currentTime">0:00</span>
                <input type="range" id="progressBar" min="0" max="100" value="0">
                <span id="totalTime">0:00</span>
            </div>
            <div class="player-controls">
                <button id="shuffleBtn" class="control-btn">üîÄ</button>
                <button id="prevBtn" class="control-btn">‚èÆ</button>
                <button id="playPauseBtn" class="control-btn main">‚ñ∂</button>
                <button id="nextBtn" class="control-btn">‚è≠</button>
                <button id="repeatBtn" class="control-btn">üîÅ</button>
            </div>
            <div class="player-volume">
                <span>üîä</span>
                <input type="range" id="volumeSlider" min="0" max="100" value="80">
            </div>
            <button id="likeBtn" class="like-btn">‚ô°</button>
        </div>

        <!-- BOTTOM NAVIGATION -->
        <nav class="bottom-nav">
            <button data-view="homeView" class="nav-btn active">
                <span class="nav-icon">üè†</span>
                <span class="nav-label">Home</span>
            </button>
            <button data-view="libraryView" class="nav-btn">
                <span class="nav-icon">üìö</span>
                <span class="nav-label">Library</span>
            </button>
            <button data-view="searchView" class="nav-btn">
                <span class="nav-icon">üîç</span>
                <span class="nav-label">Search</span>
            </button>
            <button data-view="profileView" class="nav-btn">
                <span class="nav-icon">üë§</span>
                <span class="nav-label">Profile</span>
            </button>
        </nav>
    </div>

    <!-- CHANGE PASSWORD MODAL -->
    <div id="passwordModal" class="modal">
        <div class="modal-content">
            <h3>Change Password</h3>
            <input type="password" id="currentPassword" placeholder="Current Password">
            <input type="password" id="newPassword" placeholder="New Password">
            <input type="password" id="confirmNewPassword" placeholder="Confirm New Password">
            <div id="passwordError" class="error-message"></div>
            <div class="modal-buttons">
                <button id="cancelPassword">Cancel</button>
                <button id="savePassword">Save</button>
            </div>
        </div>
    </div>

    <audio id="audioPlayer"></audio>

    <script src="firebase.js"></script>
    <script src="cloudinary.js"></script>
    <script src="app.js"></script>
</body>
</html>
